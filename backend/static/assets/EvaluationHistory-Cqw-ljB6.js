import{r as d,o as y,c as i,a as t,i as b,t as l,F as f,m,d as v,E as r,p as w,e as n,n as u}from"./index-BszAOtP9.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"evaluation-container"},H={class:"page-header"},M=["disabled"],B={class:"stats-grid"},C={class:"stat-card"},E={class:"stat-info"},L={class:"stat-value"},V={class:"stat-card"},k={class:"stat-info"},F={class:"stat-value correct"},N={class:"stat-card"},S={class:"stat-info"},D={class:"stat-value incorrect"},T={class:"stat-card"},I={class:"stat-info"},j={class:"stat-value accuracy"},q={class:"table-card"},A={class:"table-header"},G={class:"table-count"},J={class:"table-wrapper"},K={key:0,class:"data-table"},O={class:"time-cell"},P={class:"type-cell"},Q={class:"notes-cell"},R={key:1,class:"empty-state"},U={__name:"EvaluationHistory",setup(W){const o=d([]),c=d({total:0,correct:0,incorrect:0,accuracy:0}),h=async()=>{try{const a=await v.get("/api/evaluations");o.value=a.data.evaluations.reverse(),c.value=a.data.statistics}catch{r.error("加载评定记录失败")}},p=async()=>{try{await w.confirm("确定要清空所有评定记录吗?","确认",{type:"warning"}),await v.delete("/api/evaluations"),o.value=[],c.value={total:0,correct:0,incorrect:0,accuracy:0},r.success("评定记录已清空")}catch(a){a!=="cancel"&&r.error("清空失败")}},_=a=>a?new Date(a).toLocaleString("zh-CN"):"-",g=a=>({camera:"摄像头",video:"视频",image:"图片"})[a]||a;return y(()=>h()),(a,s)=>(n(),i("div",x,[t("header",H,[s[1]||(s[1]=t("div",null,[t("h1",{class:"page-title"},"评定记录"),t("p",{class:"page-desc"},"查看历史检测结果的评定数据")],-1)),t("button",{class:"btn btn-danger",onClick:p,disabled:o.value.length===0},[...s[0]||(s[0]=[t("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[t("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1),b(" 清空记录 ",-1)])],8,M)]),t("div",B,[t("div",C,[s[3]||(s[3]=t("div",{class:"stat-icon total"},[t("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"currentColor"},[t("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})])],-1)),t("div",E,[t("span",L,l(c.value.total),1),s[2]||(s[2]=t("span",{class:"stat-label"},"总评定数",-1))])]),t("div",V,[s[5]||(s[5]=t("div",{class:"stat-icon correct"},[t("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"currentColor"},[t("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})])],-1)),t("div",k,[t("span",F,l(c.value.correct),1),s[4]||(s[4]=t("span",{class:"stat-label"},"正确识别",-1))])]),t("div",N,[s[7]||(s[7]=t("div",{class:"stat-icon incorrect"},[t("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"currentColor"},[t("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})])],-1)),t("div",S,[t("span",D,l(c.value.incorrect),1),s[6]||(s[6]=t("span",{class:"stat-label"},"错误识别",-1))])]),t("div",T,[s[9]||(s[9]=t("div",{class:"stat-icon accuracy"},[t("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:"currentColor"},[t("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17l4.59-4.59L16 11l-6 6z"})])],-1)),t("div",I,[t("span",j,l((c.value.accuracy*100).toFixed(1))+"%",1),s[8]||(s[8]=t("span",{class:"stat-label"},"准确率",-1))])])]),t("div",q,[t("div",A,[s[10]||(s[10]=t("span",{class:"table-title"},"评定列表",-1)),t("span",G,"共 "+l(o.value.length)+" 条记录",1)]),t("div",J,[o.value.length>0?(n(),i("table",K,[s[11]||(s[11]=t("thead",null,[t("tr",null,[t("th",null,"时间"),t("th",null,"来源"),t("th",null,"检测类型"),t("th",null,"评定结果"),t("th",null,"备注")])],-1)),t("tbody",null,[(n(!0),i(f,null,m(o.value,e=>(n(),i("tr",{key:e.id},[t("td",O,l(_(e.timestamp)),1),t("td",null,[t("span",{class:u(["source-tag",e.source_type])},l(g(e.source_type)),3)]),t("td",P,l(e.detection_type||"-"),1),t("td",null,[t("span",{class:u(["result-tag",e.is_correct?"correct":"incorrect"])},l(e.is_correct?"正确":"错误"),3)]),t("td",Q,l(e.notes||"-"),1)]))),128))])])):(n(),i("div",R,[...s[12]||(s[12]=[t("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"currentColor"},[t("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})],-1),t("p",null,"暂无评定记录",-1)])]))])])]))}},Z=z(U,[["__scopeId","data-v-63c0db5a"]]);export{Z as default};
